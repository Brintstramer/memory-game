(()=>{"use strict";function t(e){if(null==e||!1===e)return document.createTextNode("");if("string"==typeof e||"number"==typeof e||!0===e)return document.createTextNode(e);if(Array.isArray(e)){var a=document.createDocumentFragment();return e.forEach((function(e){a.appendChild(t(e))})),a}var n=document.createElement(e.tag);return e.cls&&[].concat(e.cls).forEach((function(t){n.classList.add(t)})),e.attrs&&Object.keys(e.attrs).forEach((function(t){n.setAttribute(t,e.attrs[t])})),n.appendChild(t(e.content)),n}function e(t){return{tag:"div",cls:"cards__card",attrs:{style:"background-image: url(./static/img/".concat(t,".svg)"),"data-card":t}}}var a,n,c=function(t,e,a){if(a||2===arguments.length)for(var n,c=0,r=e.length;c<r;c++)!n&&c in e||(n||(n=Array.prototype.slice.call(e,0,c)),n[c]=e[c]);return t.concat(n||Array.prototype.slice.call(e))},r={level:"",timer:{},cards:["spadesA","spadesK","spadesQ","spadesJ","spades10","spades9","spades8","spades7","spades6","heartsA","heartsK","heartsQ","heartsJ","hearts10","hearts9","hearts8","hearts7","hearts6","diamondsA","diamondsK","diamondsQ","diamondsJ","diamonds10","diamonds9","diamonds8","diamonds7","diamonds6","clubsA","clubsK","clubsQ","clubsJ","clubs10","clubs9","clubs8","clubs7","clubs6"],"generated-cards":[],"selected-cards":{firstCard:!1,secondCard:!1,firstCardValue:"",secondCardValue:"",openedCards:0}},s=document.querySelector(".app"),d=0,i=0;function o(){var e,a;s&&(s.textContent="",s.appendChild(t({tag:"div",cls:"notification",content:[{tag:"div",cls:"notification__text",content:[{content:"Выбери"},{tag:"br"},{content:"сложность"}]},{tag:"div",cls:"notification__levels",content:[{tag:"div",cls:"notification__levels__level",content:[{tag:"input",attrs:{id:"1",type:"radio",name:"level",value:"1"}},{tag:"label",attrs:{for:"1"},content:"1"}]},{tag:"div",cls:"notification__levels__level",content:[{tag:"input",attrs:{id:"2",type:"radio",name:"level",value:"2"}},{tag:"label",attrs:{for:"2"},content:"2"}]},{tag:"div",cls:"notification__levels__level",content:[{tag:"input",attrs:{id:"3",type:"radio",name:"level",value:"3"}},{tag:"label",attrs:{for:"3"},content:"3"}]}]},{tag:"button",cls:"notification__btn-start",content:"Старт"}]}))),e=s.querySelector(".notification__btn-start"),null==(a=null==s?void 0:s.querySelectorAll(".notification__levels__level"))||a.forEach((function(t){t.addEventListener("click",(function(){r.level=t.textContent}))})),e.addEventListener("click",(function(){switch(r.level){case"1":l(3);break;case"2":l(6);break;case"3":l(9)}}))}function l(e){s.textContent="",s.appendChild(t({tag:"div",cls:"header",content:[{tag:"div",cls:"header__time",content:"00.00"},{tag:"button",cls:"header__restart",content:"Начать заново"}]})),s.appendChild(t({tag:"div",cls:"cards"})),function(t){r["generated-cards"]=[];for(var e=0;e<t;e++){var a=Math.floor(36*Math.random());r["generated-cards"].push(r.cards[a])}r["generated-cards"]=c(c([],r["generated-cards"],!0),r["generated-cards"],!0),r["generated-cards"]=r["generated-cards"].sort((function(){return Math.random()-.5}))}(e),f(),r.timer.interval=setInterval(u,1e3),s.querySelector(".header__restart").addEventListener("click",(function(){a.textContent="",f(),d=0,i=0,r["selected-cards"].openedCards=0,r["selected-cards"].firstCard=!1,r["selected-cards"].secondCard=!1}))}function u(){(d+=1)>=60&&(i+=1,d=0);var t=d<10?"0".concat(d):d,e=i<10?"0".concat(i):i;(n=s.querySelector(".header__time")).textContent="".concat(e,".").concat(t)}function f(){(a=s.querySelector(".cards")).appendChild(t(r["generated-cards"].map(e))),a.querySelectorAll(".cards__card").forEach((function(t){t.style.pointerEvents="none",setTimeout((function(){t.style.backgroundImage="url('./static/img/card-back.svg')",t.style.pointerEvents=""}),5e3),t.addEventListener("click",(function(){t.classList.contains("matched")||(t.style.backgroundImage="url('./static/img/".concat(t.dataset.card,".svg')"),t.style.pointerEvents="none",r["selected-cards"].firstCard?(r["selected-cards"].secondCard=t,r["selected-cards"].secondCardValue=t.getAttribute("data-card"),r["selected-cards"].firstCardValue===r["selected-cards"].secondCardValue?("object"==typeof r["selected-cards"].firstCard&&r["selected-cards"].firstCard.classList.add("matched"),"object"==typeof r["selected-cards"].secondCard&&r["selected-cards"].secondCard.classList.add("matched"),r["selected-cards"].firstCard=!1,r["selected-cards"].openedCards+=1,r["selected-cards"].openedCards===Math.floor(r["generated-cards"].length/2)&&g("./static/img/icon-win.svg","Вы выиграли!")):(r["selected-cards"].firstCard=!1,r["selected-cards"].secondCard=!1,g("./static/img/icon-lose.svg","Вы проиграли!"))):(r["selected-cards"].firstCard=t,r["selected-cards"].firstCardValue=t.getAttribute("data-card")))}))}))}function g(e,a){null==s||s.appendChild(t({tag:"div",cls:"transparent-background",content:[]})),null==s||s.appendChild(t(function(t,e){return{tag:"div",cls:"notification",content:[{tag:"img",cls:"notification__icon",attrs:{src:t}},{tag:"div",cls:"notification__text",content:e},{tag:"div",cls:"notification__time",content:[{tag:"p",cls:"notification__time__text",content:"Затраченное время"},{tag:"div",cls:"notification__time__value",content:"00.00"}]},{tag:"button",cls:"notification__btn-start",content:"Играть снова"}]}}(e,a)));var c=s.querySelector(".notification__time__value");n&&(c.textContent=n.textContent),clearInterval(r.timer.interval),d=0,i=0,s.querySelector(".notification__btn-start").addEventListener("click",(function(){r["selected-cards"].openedCards=0,o()}))}o()})();